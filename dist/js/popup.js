(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("intervalsContainer"),t=document.getElementById("addIntervalBtn"),n=document.getElementById("executeBtn"),a=document.getElementById("month"),o=document.getElementById("year"),c=document.getElementById("minutes_per_day");function d(t="09:00",n="17:00"){const a=document.createElement("div");a.classList.add("interval");const o=document.createElement("input");o.type="time",o.name="clock_in",o.required=!0,o.value=t,a.appendChild(o);const c=document.createElement("input");c.type="time",c.name="clock_out",c.required=!0,c.value=n,a.appendChild(c);const d=document.createElement("button");d.type="button",d.textContent="-",d.addEventListener("click",(()=>e.removeChild(a))),a.appendChild(d),e.appendChild(a)}t.addEventListener("click",(()=>d())),n.addEventListener("click",(()=>{const t=parseInt(a.value),n=parseInt(o.value),d=parseInt(document.getElementById("employee_id").value),l=parseInt(c.value),r=e.querySelectorAll(".interval"),u={month:t,year:n,employee_id:d,intervals:Array.from(r).map((e=>({clock_in:e.querySelector('input[name="clock_in"]').value,clock_out:e.querySelector('input[name="clock_out"]').value}))),minutes_per_day:l};console.log("Data to send:",u),d&&chrome.runtime.sendMessage({action:"executeBatch",data:u},(e=>{console.log("Respuesta recibida:",e),chrome.tabs.query({active:!0,currentWindow:!0},(e=>{chrome.tabs.reload(e[0].id)}))}))})),d();const l=new Date;a.value=String(l.getMonth()+1),o.value=String(l.getFullYear()),c.value=l.getMonth()>=6&&l.getMonth()<=8?"420":"480"}))})();